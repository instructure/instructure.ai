language json;

`{
  "name": $pkgname,
  $...
}` where {
  $filename <: r".*/packages/[^/]+/package\.json$",

  let $prefix = load("packagePrefix"),

  not $pkgname <: r"^" ++ $prefix ++ ".+",

  register_diagnostic(
    span = $pkgname,
    severity = "error",
    message = "Package name must start with \"" ++ $prefix ++ "\""
  )
}
